!function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={exports:{},id:a,loaded:!1};return e[a].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="/pa/bg-pa-partner/app/",t(0)}([function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.module=void 0;var o=n(1),r=a(o);n(2),n(4),n(5),n(24);var l=r.default.module("ext.modules.bgPaMain",["ext.modules.bgPaMain.ctrls","ext.modules.bgPaMain.svcs"]);t.module=l},function(e,t){e.exports=angular},function(e,t){},,function(e,t){},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=a(o),l=n(6),u=a(l),i=n(12),c=a(i),s=n(13),d=a(s),m=n(14),f=a(m),p=n(15),v=a(p),b=n(16),h=a(b),y=n(17),_=a(y),g=n(18),D=a(g),I=n(19),k=a(I),$=n(20),V=a($),C=n(21),x=a(C),N=n(22),F=a(N),P=n(23),w=a(P);t.default=r.default.module("ext.modules.bgPaMain.ctrls",[]).controller("ext_modules_UserTask_InitiatorStartCtrl",u.default).controller("ext_modules_UserTask_InitiatorInputCtrl",c.default).controller("ext_modules_UserTask_InitiatorOrderCreateReworkCtrl",d.default).controller("ext_modules_UserTask_InitiatorOrderUpdateReworkCtrl",f.default).controller("ext_modules_UserTask_InitiatorRejectNotificationCtrl",v.default).controller("ext_modules_UserTask_InitiatorProductIssuedCtrl",h.default).controller("ext_modules_UserTask_InitiatorReworkCtrl",_.default).controller("ext_modules_UserTask_PartnerOrderCreateErrorCtrl",D.default).controller("ext_modules_UserTask_PartnerRejectNotificationCtrl",k.default).controller("ext_modules_UserTask_PartnerProductIssuedCtrl",V.default).controller("ext_modules_UserTask_PartnerOrderUpdateCtrl",x.default).controller("ext_modules_UserTask_PartnerOrderUpdateErrorCtrl",F.default).controller("ext_modules_UserTask_PartnerVerifyCtrl",w.default)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),r=a(o),l=n(8),u=a(l),i=n(10),c=a(i),s=n(11),d=a(s),m=["$scope","fzSvcEs","fzModal","fzModalSelectCompany","camunda","ext_modules_bgPaMain_svcs_zgrSearch","$q",function(e,t,n,a,o,l,i){function s(){var e=b.model.product;return"execution"==e.bankGuaranteeTypeRefId&&"44"==e.federalLawRefId&&e.maxAmount>15e8}function m(){var e=b.model.product;return null!==e.finalAmount&&!!e.maxAmount&&e.finalAmount/e.maxAmount<=.75}function f(){s()&&b.model.product.beneficiaries&&b.model.product.beneficiaries.forEach(function(e){null!=e.conAmount&&(m()?e.amount=1.5*e.conAmount:e.amount=e.conAmount)})}function p(){var t=b.model.product;b.model.state.showIsRequiredSecurityForGuaranteePeriod()||(t.isRequiredSecurityForGuaranteePeriod=!1,t.securityForGuaranteePeriodDays=null),b.model.state.showIsRequiredIndisputableDebiting()||(t.isRequiredIndisputableDebiting=!1),b.model.state.showIsIncludedForfeit()||(t.isIncludedForfeit=!1),b.model.state.showPrepaymentExists()||(t.prepaymentExists=!1,t.prepaymentAmount=null),o.setVar(e.camForm,"StartForm_result",t,"Json");var n=[];return i.all(n)}function v(){var e=new Date,t=e.getFullYear(),n=(e.getMonth()+1+"").padStart(2,"0"),a=(e.getDate()+"").padStart(2,"0");return t+"-"+n+"-"+a}var b=this;b.model={state:{isZgrSearching:!1,showEditDetails:!1,zgrNotFound:!1,zgrChangeNumber:!1,purchaseNumber:null,isPrincipalReplacing:!1,principal:null,isStartDateInvalid:null,isEndDateInvalid:null,isRequiredExecutionDateInvalid:null,isPlanningStartDateInvalid:null,isPlanningEndDateInvalid:null,entryFrom:"provisionedDate"},ref:{bankGuaranteeType:null,federalLaw:null,tenderSubjectSegment:null},searchResult:null,product:{principalCompanyId:null,purchaseNumber:null,purchasePublishedDate:null,federalLawRefId:null,lotNumber:null,maxAmount:null,bankGuaranteeAmount:null,bankGuaranteeTypeRefId:null,startDate:v(),endDate:null,durationDays:null,prepaymentExists:null,prepaymentAmount:null,tenderType:null,finalAmount:null,assessmentProtocolName:null,assessmentProtocolDate:null,assessmentProtocolNumber:null,tenderLotSubject:null,subject:null,isRequiredSecurityForGuaranteePeriod:!1,securityForGuaranteePeriodDays:null,isRequiredIndisputableDebiting:!1,requiredExecutionDate:v(),url:null,beneficiaries:null,isIncludedForfeit:!1,marketPlace:null,amount:null,ikzList:null,okpdList:null}},b.model.state.showIsRequiredSecurityForGuaranteePeriod=function(){return"execution"===b.model.product.bankGuaranteeTypeRefId},b.model.state.showIsRequiredIndisputableDebiting=function(){return"44"===b.model.product.federalLawRefId},b.model.state.showIsIncludedForfeit=function(){return"execution"===b.model.product.bankGuaranteeTypeRefId},b.model.state.showPrepaymentExists=function(){return"execution"===b.model.product.bankGuaranteeTypeRefId},t.search("ref","bankGuaranteeType","",1e3).then(function(e){return b.model.ref.bankGuaranteeType=e.hits}),t.search("ref","federalLaw","",1e3).then(function(e){return b.model.ref.federalLaw=e.hits}),t.search("ref","tenderSubjectSegment","",1e3).then(function(e){return b.model.ref.tenderSubjectSegment=e.hits}),b.configure=function(t){var n=(t.variableManager,t.submit);t.submit=function(a){e.$$camForm.$invalid?e.$apply(function(){b.model.state.showValidation=!0,a("Проверьте правильность заполнения данных")}):p().then(function(e){return n.call(t,function(e,t){e||angular.isE2eTestEnvironment&&alert("Order created: "+t.businessKey),a(e,t)})}).catch(function(e){a("Ошибка при сохранении данных")})}},e.$watch("my.model.product.finalAmount",function(){return f()}),b.validatePrepayment=function(){var e=b.model.product;return!(s()&&m()&&e.prepaymentExists&&e.bankGuaranteeAmount<e.prepaymentAmount)},e.$watch("my.model.state.principal.id",function(e){e&&(b.model.product.principalCompanyId=e,b.model.state.principalInn=b.model.state.principal.INN,b.model.state.principalDisplayName=b.model.state.principal.displayName,b.model.state.isPrincipalReplacing=!1,b.model.state.principal=null)}),function(){function t(e,t){var n=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),a=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((a-n)/r)}function n(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,a=e.getDate();return n<10&&(n="0"+n),a<10&&(a="0"+a),t+"-"+n+"-"+a}function a(){var e=b.model.product,a=null;if(e.startDate&&e.endDate){var o=new Date(e.startDate),r=new Date(e.endDate);a=t(o,r)+1,a<=0&&(a=null)}b.model.product.durationDays=a;var l=n();b.model.state.isStartDateInvalid=e.startDate&&e.startDate<l,b.model.state.isEndDateInvalid=e.endDate&&e.endDate<l}function o(){var e=n(),t=b.model.product.requiredExecutionDate;b.model.state.isRequiredExecutionDateInvalid=t&&t<e}var r=864e5;e.$watch("my.model.product.startDate",a),e.$watch("my.model.product.endDate",a),e.$watch("my.model.product.requiredExecutionDate",o)}(),b.calcMaxAmount=function(){return b.model.product.beneficiaries&&b.model.product.beneficiaries.length?b.model.product.beneficiaries.map(function(e){return e.purchaseAmount}).reduce(function(e,t){return e+t})||null:null},b.calcBankGuaranteeAmount=function(){return b.model.product.beneficiaries&&b.model.product.beneficiaries.length?b.model.product.beneficiaries.map(function(e){return e.amount}).reduce(function(e,t){return e+t})||null:null},e.$watch("my.calcMaxAmount()",function(e){b.model.product.maxAmount=e}),e.$watch("my.calcBankGuaranteeAmount()",function(e){b.model.product.bankGuaranteeAmount=e}),b.zgrSearch=function(e){e.preventDefault(),b.model.state.isZgrSearching=!0,b.model.searchResult=null,l.search(b.model.state.purchaseNumber).then(function(e){e.result.lots&&e.result.lots.length?(b.model.state.zgrNotFound=!1,b.model.searchResult=e.result,b.selectLot()):(b.model.state.zgrNotFound=!0,b.model.state.zgrChangeNumber=!1),b.model.state.isZgrSearching=!1}).catch(function(e){b.model.state.zgrNotFound=!0,b.model.state.isZgrSearching=!1})},b.zgrFillManual=function(e){e.preventDefault(),b.model.state.showEditDetails=!0,b.model.product.purchaseNumber=b.model.state.purchaseNumber,b.model.product.assessmentProtocolName="Протокол",b.model.product.beneficiaries=null},b.zgrChangeNumber=function(e){e.preventDefault(),b.model.state.showEditDetails=!1,b.model.state.zgrChangeNumber=!0,b.model.state.purchaseNumber=b.model.product.purchaseNumber},b.cancelZgrChangeNumber=function(e){e.preventDefault(),b.model.state.showEditDetails=!0,b.model.state.zgrChangeNumber=!1},b.selectLot=function(){if(1===b.model.searchResult.lots.length){var e=b.model.searchResult.lots[0];b.selectBeneficiaries(e)}else n.open({template:c.default,controller:d.default,controllerAs:"my",scope:{modalTitle:"Выберите лот"},params:{lots:b.model.searchResult.lots}}).closed.then(function(e){e&&b.selectBeneficiaries(e)})},b.selectBeneficiaries=function(e){n.open({template:r.default,controller:u.default,controllerAs:"my",scope:{modalTitle:"Выбор бенефициаров"},params:{lot:e,replaceBeneficiary:b.replaceBeneficiary}}).closed.then(function(t){t&&(b.model.state.showEditDetails=!0,b.model.state.zgrChangeNumber=!1,b.model.product.subject=b.model.searchResult.subject,b.model.product.purchaseNumber=b.model.searchResult.number,b.model.product.url=b.model.searchResult.url,b.model.product.federalLawRefId=b.model.searchResult.federalLawRefId,b.model.product.tenderType=b.model.searchResult.tenderType,b.model.searchResult.etp?b.model.product.marketPlace=b.model.searchResult.etp.name:b.model.product.marketPlace=null,b.model.product.lotNumber=e.number,b.model.product.tenderLotSubject=e.subject,b.model.product.beneficiaries=t,b.model.product.beneficiaries.forEach(function(e){switch(b.model.product.bankGuaranteeTypeRefId){case"execution":e.amount=e.conAmount;break;case"participation":e.amount=e.appAmount}}),b.model.product.purchaseNumber=b.model.state.purchaseNumber,b.model.product.purchasePublishedDate=b.model.searchResult.publishDate,b.model.product.tenderDate=b.model.searchResult.holdingDate,b.model.product.amount=b.model.searchResult.amount,b.model.product.okpdList=b.extractOkpdList(e.products),b.model.product.ikzList=e.ikzList||[],b.model.product.assessmentProtocolName="Протокол")})},b.extractOkpdList=function(e){for(var t=[],n=0;n<(e.length||[]);n++){var a=e[n];a.classifier&&a.classifier.okpd2&&t.push(a.classifier.okpd2)}return t},b.addBeneficiary=function(){a.open().closed.then(function(e){e&&(b.model.product.beneficiaries=b.model.product.beneficiaries||[],b.model.product.beneficiaries.push({id:e.id,purchaseAmount:null,isPurchaseAmountEditable:!0,appAmount:null,conAmount:null,amount:null,displayName:e.displayName,INN:e.INN,deliveryPlace:null}))})},b.removeBeneficiary=function(e){var t=b.model.product.beneficiaries.indexOf(e);b.model.product.beneficiaries.splice(t,1)},b.replaceBeneficiary=function(e){a.open(e.INN||e.sourceName||e.displayName).closed.then(function(t){t&&(e.id=t.id,e.displayName=t.displayName,e.INN=t.INN)})},b.onEntryFromChange=function(e){"provisionedDate"===e&&(b.model.product.startDate=v(),b.model.product.requiredExecutionDate=b.model.product.startDate)}}];t.default=m},function(e,t){var n,a=window.angular;try{n=a.module(["ng"])}catch(e){n=a.module("ng",[])}var o='<div class="fz-modal__header">\n{{modalTitle}}\n<button type="button" class="fz-modal__button-close" ng-click="my.closeCancel()"></button>\n</div>\n<div class="fz-modal__panel-top" style="padding: 24px 32px; border-bottom: 1px solid #E6EAED">\n<span>Лот № {{my.lot.number}}</span>\n<br/> Макс. цена закупки\n<span style="color:#0094FF">{{my.lot.maxAmount | fzToMoney:2}}</span> руб.\n<br/>\n<span style="color:#81888C;font-size:12px">Предмет контракта / предмет закупки</span>\n<br/>\n<span>{{my.lot.subject}}</span>\n</div>\n<div class="fz-modal__body">\n<div class="fz-modal-select-beneficiaries__table-cnt">\n<table class="fz-modal-select-beneficiaries__table">\n<thead>\n<tr>\n<th>Заказчик / бенефициар</th>\n<th class="fz-modal-select-beneficiaries__table-value">Макс. цена закупки, руб.</th>\n</tr>\n</thead>\n<tbody>\n<tr ng-repeat="x in my.beneficiaries track by $index">\n<td>\n<div class="fz-modal-select-beneficiaries__customer-name">{{x.sourceName}}</div>\n<a class="fz-modal-select-beneficiaries__customer-select" ng-if="!x.id && my.beneficiaries.length === 1" ng-click="my.replaceBeneficiary(x)">выбрать бенефициара</a>\n<div class="fz-modal-select-beneficiaries__customer-replace" ng-if="x.id">\n<h5 class="fz-modal-select-beneficiaries__customer-name-selected">{{x.displayName}}</h5>\n<p>\nИНН: {{x.INN}}\n<a class="fz-modal-select-beneficiaries__customer-select" ng-click="my.replaceBeneficiary(x)">заменить</a>\n</p>\n</div>\n</td>\n<td>\n<div class="fz-modal-select-beneficiaries__table-value">{{x.purchaseAmount | fzToMoney:2}}</div>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p class="fz-modal-select-beneficiaries__alert" ng-if="my.beneficiaries.length > 1">\n<span>Этот лот имеет нескольких бенефициаров</span>\n<br>\n<span>В данный момент заведение заявок по таким лотам недоступно</span>\n</p>\n</div>\n<div class="fz-modal__footer">\n<button type="button" class="fz-modal__button fz-modal__button_simple" ng-click="my.closeCancel()">Отмена</button>\n<button type="button" class="fz-modal__button fz-modal__button_main" ng-click="my.closeOk()" ng-disabled="my.getIsDisabled()">Применить</button>\n</div>',r="start-form/select-beneficiaries/template.html";n.run(["$templateCache",function(e){e.put(r,o)}]),e.exports=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(9),t.default=["$modalInstanse","$modalParams",function(e,t){var n=this;n.lot={number:t.lot.number,maxAmount:parseInt(100*t.lot.maxAmount),subject:t.lot.subject},n.beneficiaries=t.lot.customers.map(function(e){return{sourceName:e.fullName,purchaseAmount:parseInt(100*e.maxAmount),isPurchaseAmountEditable:!e.maxAmount,appAmount:parseInt(100*e.applicationGuaranteeAmount),conAmount:parseInt(100*e.contractGuaranteeAmount),amount:null,deliveryPlace:e.deliveryPlace,displayName:null,INN:e.inn,customerRegNum:e.regNum}}),n.replaceBeneficiary=t.replaceBeneficiary,n.getIsDisabled=function(){return!n.beneficiaries||!n.beneficiaries.every(function(e){return!!e.id})||1!==n.beneficiaries.length},n.closeCancel=function(){e.close()},n.closeOk=function(){e.close(n.beneficiaries)}}]},function(e,t){},function(e,t){var n,a=window.angular;try{n=a.module(["ng"])}catch(e){n=a.module("ng",[])}var o='<div class="fz-modal__header">\n{{modalTitle}}\n<button type="button" class="fz-modal__button-close" ng-click="my.closeCancel()"></button>\n</div>\n<div class="fz-modal__body">\n<div>\n<ul class="select">\n<li ng-repeat="x in my.lots | orderBy:\'number\' track by $index">\n<label>\n<span class="radio">\n<input type="radio" name="tenderLotNumber" ng-click="my.selectLot(x)"/>\n<i></i>\n</span>\n<span>Лот № {{x.number}}</span>\n<br/> Макс. цена закупки\n<span style="color:#0094FF">{{x.maxAmount | fzToMoney:2}}</span> руб.\n<br/>\n<span style="color:#81888C;font-size:12px">Предмет контракта / предмет закупки</span>\n<br/>\n<span>{{x.subject}}</span>\n</label>\n</li>\n</ul>\n</div>\n</div>\n<div class="fz-modal__footer">\n<button type="button" class="fz-modal__button fz-modal__button_simple" ng-click="my.closeCancel()">Отмена</button>\n<button type="button" class="fz-modal__button fz-modal__button_main" ng-click="my.closeOk()" ng-disabled="my.getIsDisabled()">Выбрать</button>\n</div>',r="start-form/select-lot/template.html";n.run(["$templateCache",function(e){e.put(r,o)}]),e.exports=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["$modalInstanse","$modalParams",function(e,t){var n=this;n.selectedLot=null,n.lots=t.lots,n.selectLot=function(e){n.selectedLot=e},n.closeCancel=function(){e.close()},n.closeOk=function(){e.close(n.selectedLot)},n.getIsDisabled=function(){return!n.selectedLot}}]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["$scope","camunda","$q","fzSvcCamundaDocs",function(e,t,n,a){function o(){var a=r.needCheckValid()?{model:angular.copy(r.model)}:{model:{decision:angular.copy(r.model.decision)}};a.model.ref=null,t.setVar(e.camForm,l+"_result",a,"Json");var o=[];return n.all(o)}var r=this,l="UserTask_InitiatorInput";r.vars={},r.state={showValidation:!1,persons:[]},r.model=null,r.configure=function(t){var n=[l],u=t.variableManager;r.camForm=t,t.on("form-loaded",function(){n.forEach(function(e){return u.fetchVariable(e)})}),t.on("variables-fetched",function(){n.forEach(function(e){return r.vars[e]=u.variableValue(e)}),r.model=r.vars[l],a.loadDrafts(t.taskId).then(function(e){r.state.docDrafts=e}),u.destroyVariable(l)});var i=t.submit;t.submit=function(n){e.$$camForm.$invalid?e.$apply(function(){r.state.showValidation=!0;var e=r.model.decision&&!r.model.decision.resultCode?"Необходимо выбрать решение по задаче":"Проверьте правильность заполнения данных";n(e)}):o().then(function(e){return i.call(t,n)}).catch(function(e){n("Ошибка при сохранении данных")})}},r.saveDraft=function(){t.saveVar(r.camForm.taskId,l,JSON.stringify(r.model),"Json").then(function(){alert("Черновик успешно сохранён")}).catch(function(e){alert("Не удалось сохранить черновик")})},r.needCheckValid=function(){return r.model&&r.model.decision&&"SEND_TO_BANK"===r.model.decision.resultCode},r.isRequired_debtStatement=function(){return!r.model.principalDocs.debtStatement.files.length&&!((r.state.docDrafts||{})["debtStatement@"+r.model.principalDocs.debtStatement.entityId]||[]).length&&((r.model.companyInfo||{}).items||[]).some(function(e){return"company.debtToBudget"===e.attributeId&&e.value.booleanValue})&&((r.model.companyInfo||{}).items||[]).some(function(e){return"company.debtToBudgetAmount"===e.attributeId&&e.value.moneyValue>1e5})},r.isRequired_guarantee=function(){return r.model&&((r.model.additionalInfo||{}).items||[]).some(function(e){return"product.bg.isGuaranteeInBeneficiaryForm"===e.attributeId&&e.value.booleanValue})}}];t.default=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["$scope","camunda","$q","fzSvcCamundaDocs",function(e,t,n,a){function o(){var a={model:angular.copy(r.model),resultCode:r.state.resultCode,comment:r.state.comment};a.model.ref=null,t.setVar(e.camForm,l+"_result",a,"Json");var o=[];return n.all(o)}var r=this,l="UserTask_InitiatorOrderCreateRework";r.vars={},r.state={showValidation:!1,persons:[]},r.model=null,r.configure=function(t){var n=[l],u=t.variableManager;r.camForm=t,t.on("form-loaded",function(){n.forEach(function(e){return u.fetchVariable(e)})}),t.on("variables-fetched",function(){n.forEach(function(e){return r.vars[e]=u.variableValue(e)}),r.model=r.vars[l],a.loadDrafts(t.taskId).then(function(e){r.state.docDrafts=e}),u.destroyVariable(l)});var i=t.submit;t.submit=function(n){e.$$camForm.$invalid?e.$apply(function(){r.state.showValidation=!0;var e=r.model.decision&&!r.model.decision.resultCode?"Необходимо выбрать решение по задаче":"Проверьте правильность заполнения данных";n(e)}):o().then(function(e){return i.call(t,n)}).catch(function(e){n("Ошибка при сохранении данных")})}},r.saveDraft=function(){t.saveVar(r.camForm.taskId,l,JSON.stringify(r.model),"Json").then(function(){alert("Черновик успешно сохранён")}).catch(function(e){alert("Не удалось сохранить черновик")})}}];t.default=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["$scope","camunda","$q","fzSvcCamundaDocs",function(e,t,n,a){function o(){var a={model:angular.copy(r.model),resultCode:r.state.resultCode,comment:r.state.comment};a.model.ref=null,t.setVar(e.camForm,l+"_result",a,"Json");var o=[];return n.all(o)}var r=this,l="UserTask_InitiatorOrderUpdateRework";r.vars={},r.state={showValidation:!1,persons:[]},r.model=null,r.configure=function(t){var n=[l],u=t.variableManager;r.camForm=t,t.on("form-loaded",function(){n.forEach(function(e){return u.fetchVariable(e)})}),t.on("variables-fetched",function(){n.forEach(function(e){return r.vars[e]=u.variableValue(e)}),r.model=r.vars[l],a.loadDrafts(t.taskId).then(function(e){r.state.docDrafts=e}),u.destroyVariable(l)});var i=t.submit;t.submit=function(n){e.$$camForm.$invalid?e.$apply(function(){r.state.showValidation=!0;var e=r.model.decision&&!r.model.decision.resultCode?"Необходимо выбрать решение по задаче":"Проверьте правильность заполнения данных";n(e)}):o().then(function(e){return i.call(t,n)}).catch(function(e){n("Ошибка при сохранении данных")})}},r.saveDraft=function(){t.saveVar(r.camForm.taskId,l,JSON.stringify(r.model),"Json").then(function(){alert("Черновик успешно сохранён")}).catch(function(e){alert("Не удалось сохранить черновик")})}}];t.default=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["$scope","camunda","$q","fzSvcCamundaDocs",function(e,t,n,a){function o(){var a={model:angular.copy(r.model),resultCode:r.state.resultCode,comment:r.state.comment};a.model.ref=null,t.setVar(e.camForm,l+"_result",a,"Json");var o=[];return n.all(o)}var r=this,l="UserTask_InitiatorRejectNotification";r.vars={},r.state={showValidation:!1},r.model=null,r.configure=function(t){var n=[l],u=t.variableManager;r.camForm=t,t.on("form-loaded",function(){n.forEach(function(e){return u.fetchVariable(e)})}),t.on("variables-fetched",function(){n.forEach(function(e){return r.vars[e]=u.variableValue(e)}),r.model=r.vars[l],a.loadDrafts(t.taskId).then(function(e){r.state.docDrafts=e}),u.destroyVariable(l)});var i=t.submit;t.submit=function(n){e.$$camForm.$invalid?e.$apply(function(){r.state.showValidation=!0;var e=r.model.decision&&!r.model.decision.resultCode?"Необходимо выбрать решение по задаче":"Проверьте правильность заполнения данных";n(e)}):o().then(function(e){return i.call(t,n)}).catch(function(e){n("Ошибка при сохранении данных")})}},r.saveDraft=function(){t.saveVar(r.camForm.taskId,l,JSON.stringify(r.model),"Json").then(function(){alert("Черновик успешно сохранён")}).catch(function(e){alert("Не удалось сохранить черновик")})}}];t.default=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["$scope","camunda","$q","fzSvcCamundaDocs",function(e,t,n,a){function o(){var a={model:angular.copy(r.model),resultCode:r.state.resultCode,comment:r.state.comment};a.model.ref=null,t.setVar(e.camForm,l+"_result",a,"Json");var o=[];return n.all(o)}var r=this,l="UserTask_InitiatorProductIssued";r.vars={},r.state={showValidation:!1},r.model=null,r.configure=function(t){var n=[l],u=t.variableManager;r.camForm=t,t.on("form-loaded",function(){n.forEach(function(e){return u.fetchVariable(e)})}),t.on("variables-fetched",function(){n.forEach(function(e){return r.vars[e]=u.variableValue(e)}),r.model=r.vars[l],a.loadDrafts(t.taskId).then(function(e){r.state.docDrafts=e}),u.destroyVariable(l)});var i=t.submit;t.submit=function(n){e.$$camForm.$invalid?e.$apply(function(){r.state.showValidation=!0;var e=r.model.decision&&!r.model.decision.resultCode?"Необходимо выбрать решение по задаче":"Проверьте правильность заполнения данных";n(e)}):o().then(function(e){return i.call(t,n)}).catch(function(e){n("Ошибка при сохранении данных")})}},r.saveDraft=function(){t.saveVar(r.camForm.taskId,l,JSON.stringify(r.model),"Json").then(function(){alert("Черновик успешно сохранён")}).catch(function(e){alert("Не удалось сохранить черновик")})}}];t.default=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["$scope","camunda","$q","fzSvcCamundaDocs",function(e,t,n,a){function o(){var a={model:angular.copy(r.model),resultCode:r.state.resultCode,comment:r.state.comment};a.model.ref=null,t.setVar(e.camForm,l+"_result",a,"Json");var o=[];return n.all(o)}var r=this,l="UserTask_InitiatorRework";r.vars={},r.state={showValidation:!1,persons:[]},r.model=null,r.configure=function(t){var n=[l],u=t.variableManager;r.camForm=t,t.on("form-loaded",function(){n.forEach(function(e){return u.fetchVariable(e)})}),t.on("variables-fetched",function(){n.forEach(function(e){return r.vars[e]=u.variableValue(e)}),r.model=r.vars[l],a.loadDrafts(t.taskId).then(function(e){r.state.docDrafts=e}),u.destroyVariable(l)});var i=t.submit;t.submit=function(n){e.$$camForm.$invalid?e.$apply(function(){r.state.showValidation=!0;var e=r.model.decision&&!r.model.decision.resultCode?"Необходимо выбрать решение по задаче":"Проверьте правильность заполнения данных";n(e)}):o().then(function(e){return i.call(t,n)}).catch(function(e){n("Ошибка при сохранении данных")})}},r.saveDraft=function(){t.saveVar(r.camForm.taskId,l,JSON.stringify(r.model),"Json").then(function(){alert("Черновик успешно сохранён")}).catch(function(e){alert("Не удалось сохранить черновик")})}}];t.default=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["$scope","camunda","$q","fzSvcCamundaDocs",function(e,t,n,a){function o(){var a={model:angular.copy(r.model),resultCode:r.state.resultCode,comment:r.state.comment};a.model.ref=null,t.setVar(e.camForm,l+"_result",a,"Json");var o=[];return n.all(o)}var r=this,l="UserTask_PartnerOrderCreateError";r.vars={},r.state={showValidation:!1,persons:[]},r.model=null,r.configure=function(t){var n=[l],u=t.variableManager;r.camForm=t,t.on("form-loaded",function(){n.forEach(function(e){return u.fetchVariable(e)})}),t.on("variables-fetched",function(){n.forEach(function(e){return r.vars[e]=u.variableValue(e)}),r.model=r.vars[l],a.loadDrafts(t.taskId).then(function(e){r.state.docDrafts=e}),u.destroyVariable(l)});var i=t.submit;t.submit=function(n){e.$$camForm.$invalid?e.$apply(function(){r.state.showValidation=!0;var e=r.model.decision&&!r.model.decision.resultCode?"Необходимо выбрать решение по задаче":"Проверьте правильность заполнения данных";n(e)}):o().then(function(e){return i.call(t,n)}).catch(function(e){n("Ошибка при сохранении данных")})}},r.saveDraft=function(){t.saveVar(r.camForm.taskId,l,JSON.stringify(r.model),"Json").then(function(){alert("Черновик успешно сохранён")}).catch(function(e){alert("Не удалось сохранить черновик")})}}];t.default=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["$scope","camunda","$q","fzSvcCamundaDocs",function(e,t,n,a){function o(){var a={model:angular.copy(r.model),resultCode:r.state.resultCode,comment:r.state.comment};a.model.ref=null,t.setVar(e.camForm,l+"_result",a,"Json");var o=[];return n.all(o)}var r=this,l="UserTask_PartnerRejectNotification";r.vars={},r.state={showValidation:!1},r.model=null,r.configure=function(t){var n=[l],u=t.variableManager;r.camForm=t,t.on("form-loaded",function(){n.forEach(function(e){return u.fetchVariable(e)})}),t.on("variables-fetched",function(){n.forEach(function(e){return r.vars[e]=u.variableValue(e)}),r.model=r.vars[l],a.loadDrafts(t.taskId).then(function(e){r.state.docDrafts=e}),u.destroyVariable(l)});var i=t.submit;t.submit=function(n){e.$$camForm.$invalid?e.$apply(function(){r.state.showValidation=!0;var e=r.model.decision&&!r.model.decision.resultCode?"Необходимо выбрать решение по задаче":"Проверьте правильность заполнения данных";n(e)}):o().then(function(e){return i.call(t,n)}).catch(function(e){n("Ошибка при сохранении данных")})}},r.saveDraft=function(){t.saveVar(r.camForm.taskId,l,JSON.stringify(r.model),"Json").then(function(){alert("Черновик успешно сохранён")}).catch(function(e){alert("Не удалось сохранить черновик")})}}];t.default=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["$scope","camunda","$q","fzSvcCamundaDocs",function(e,t,n,a){function o(){var a={model:angular.copy(r.model),resultCode:r.state.resultCode,comment:r.state.comment};a.model.ref=null,t.setVar(e.camForm,l+"_result",a,"Json");var o=[];return n.all(o)}var r=this,l="UserTask_PartnerProductIssued";r.vars={},r.state={showValidation:!1},r.model=null,r.configure=function(t){var n=[l],u=t.variableManager;r.camForm=t,t.on("form-loaded",function(){n.forEach(function(e){return u.fetchVariable(e)})}),t.on("variables-fetched",function(){n.forEach(function(e){return r.vars[e]=u.variableValue(e)}),r.model=r.vars[l],a.loadDrafts(t.taskId).then(function(e){r.state.docDrafts=e}),u.destroyVariable(l)});var i=t.submit;t.submit=function(n){e.$$camForm.$invalid?e.$apply(function(){r.state.showValidation=!0;var e=r.model.decision&&!r.model.decision.resultCode?"Необходимо выбрать решение по задаче":"Проверьте правильность заполнения данных";n(e)}):o().then(function(e){return i.call(t,n)}).catch(function(e){n("Ошибка при сохранении данных")})}},r.saveDraft=function(){t.saveVar(r.camForm.taskId,l,JSON.stringify(r.model),"Json").then(function(){alert("Черновик успешно сохранён")}).catch(function(e){alert("Не удалось сохранить черновик")})}}];t.default=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["$scope","camunda","$q","fzSvcCamundaDocs",function(e,t,n,a){function o(){var a={model:angular.copy(r.model),resultCode:r.state.resultCode,comment:r.state.comment};a.model.ref=null,t.setVar(e.camForm,l+"_result",a,"Json");var o=[];return n.all(o)}var r=this,l="UserTask_PartnerOrderUpdate";r.vars={},r.state={showValidation:!1,persons:[]},r.model=null,r.configure=function(t){var n=[l],u=t.variableManager;r.camForm=t,t.on("form-loaded",function(){n.forEach(function(e){return u.fetchVariable(e)})}),t.on("variables-fetched",function(){n.forEach(function(e){return r.vars[e]=u.variableValue(e)}),r.model=r.vars[l],a.loadDrafts(t.taskId).then(function(e){r.state.docDrafts=e}),u.destroyVariable(l)});var i=t.submit;t.submit=function(n){e.$$camForm.$invalid?e.$apply(function(){r.state.showValidation=!0;var e=r.model.decision&&!r.model.decision.resultCode?"Необходимо выбрать решение по задаче":"Проверьте правильность заполнения данных";n(e)}):o().then(function(e){return i.call(t,n)}).catch(function(e){n("Ошибка при сохранении данных")})}},r.saveDraft=function(){t.saveVar(r.camForm.taskId,l,JSON.stringify(r.model),"Json").then(function(){alert("Черновик успешно сохранён")}).catch(function(e){alert("Не удалось сохранить черновик")})}}];t.default=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["$scope","camunda","$q","fzSvcCamundaDocs",function(e,t,n,a){function o(){var a={model:angular.copy(r.model),resultCode:r.state.resultCode,comment:r.state.comment};a.model.ref=null,t.setVar(e.camForm,l+"_result",a,"Json");var o=[];return n.all(o)}var r=this,l="UserTask_PartnerOrderUpdateError";r.vars={},r.state={showValidation:!1,persons:[]},r.model=null,r.configure=function(t){var n=[l],u=t.variableManager;r.camForm=t,t.on("form-loaded",function(){n.forEach(function(e){return u.fetchVariable(e)})}),t.on("variables-fetched",function(){n.forEach(function(e){return r.vars[e]=u.variableValue(e)}),r.model=r.vars[l],a.loadDrafts(t.taskId).then(function(e){r.state.docDrafts=e}),u.destroyVariable(l)});var i=t.submit;t.submit=function(n){e.$$camForm.$invalid?e.$apply(function(){r.state.showValidation=!0;var e=r.model.decision&&!r.model.decision.resultCode?"Необходимо выбрать решение по задаче":"Проверьте правильность заполнения данных";n(e)}):o().then(function(e){return i.call(t,n)}).catch(function(e){n("Ошибка при сохранении данных")})}},r.saveDraft=function(){t.saveVar(r.camForm.taskId,l,JSON.stringify(r.model),"Json").then(function(){alert("Черновик успешно сохранён")}).catch(function(e){alert("Не удалось сохранить черновик")})}}];t.default=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["$scope","camunda","$q","fzSvcCamundaDocs",function(e,t,n,a){function o(){var a={model:angular.copy(r.model),resultCode:r.state.resultCode,comment:r.state.comment};a.model.ref=null,t.setVar(e.camForm,l+"_result",a,"Json");var o=[];return n.all(o)}var r=this,l="UserTask_PartnerVerify";r.vars={},r.state={showValidation:!1,persons:[]},r.model=null,r.configure=function(t){var n=[l],u=t.variableManager;r.camForm=t,t.on("form-loaded",function(){n.forEach(function(e){return u.fetchVariable(e)})}),t.on("variables-fetched",function(){n.forEach(function(e){return r.vars[e]=u.variableValue(e)}),r.model=r.vars[l],a.loadDrafts(t.taskId).then(function(e){
r.state.docDrafts=e}),u.destroyVariable(l)});var i=t.submit;t.submit=function(n){e.$$camForm.$invalid?e.$apply(function(){r.state.showValidation=!0;var e=r.model.decision&&!r.model.decision.resultCode?"Необходимо выбрать решение по задаче":"Проверьте правильность заполнения данных";n(e)}):o().then(function(e){return i.call(t,n)}).catch(function(e){n("Ошибка при сохранении данных")})}},r.saveDraft=function(){t.saveVar(r.camForm.taskId,l,JSON.stringify(r.model),"Json").then(function(){alert("Черновик успешно сохранён")}).catch(function(e){alert("Не удалось сохранить черновик")})}}];t.default=n},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=a(o),l=n(25),u=a(l);t.default=r.default.module("ext.modules.bgPaMain.svcs",[]).service("ext_modules_bgPaMain_svcs_zgrSearch",u.default)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["$http","$timeout",function(e,t){this.search=function(t){return e.post("/api/zgr/search?purchaseNumber="+t).then(function(e){return e.data})}}];t.default=n}]);
//# sourceMappingURL=bg-pa-partner.js.map